
### 代码执行顺序
```js
console.log('begin');
setTimeout(() => {
  console.log('setTimeout')
}, 0);
new Promise((resolve) => {
  console.log('promise');
  resolve()
}).then(() => {
    console.log('then1');
  }).then(() => {
    console.log('then2');
  });
console.log('end');
// begin -> promise-> end -> then1 -> then2 ->setTimeout
```

宏任务和微任务的执行顺序基本是，在 EventLoop 中，每一次循环称为一次 tick，主要的任务顺序如下：

1. 执行栈选择最先进入队列的宏任务，执行其同步代码直至结束；

2. 检查是否有微任务，如果有则执行直到微任务队列为空；

3. 如果是在浏览器端，那么基本要渲染页面了；

4. 开始下一轮的循环（tick），执行宏任务中的一些异步代码，例如 setTimeout 等。